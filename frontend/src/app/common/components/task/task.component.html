<p-card class="relative h-full rounded-2xl shadow-sm hover:shadow-md transition-shadow flex flex-col p-4 md:p-6">
  @if (isCreator()) {
    <div class="absolute top-2 right-2 flex gap-1 md:top-3 md:right-3">
      <p-button
        icon="pi pi-pencil"
        text
        rounded
        severity="secondary"
        pTooltip="Edytuj"
        (click)="onEdit()"
        class="p-button-sm md:p-button-md"
      />
      <p-button
        icon="pi pi-trash"
        text
        rounded
        severity="danger"
        pTooltip="UsuÅ„"
        (click)="onDelete()"
        class="p-button-sm md:p-button-md"
      />
    </div>
  }

  <div class="flex flex-col gap-3 md:gap-6 pt-8">
    <div class="flex items-start gap-2 md:gap-3">
      @if (task().assignedToId) {
        <p-avatar
          shape="circle"
          [label]="getInitials(task().assignedToName || '')"
          styleClass="bg-primary text-white font-semibold"
          size="large"
          class="w-10 h-10 md:w-12 md:h-12 text-sm md:text-base"
          pTooltip="Przypisany"
        />
      } @else {
        <p-avatar
          shape="circle"
          styleClass="bg-red-500"
          size="large"
          class="w-10 h-10 md:w-12 md:h-12"
          pTooltip="Nieprzypisany"
        />
      }

      <h3 class="text-base md:text-lg font-semibold leading-snug flex-1">
        {{ task().title }}
      </h3>
    </div>

    <div class="flex flex-wrap gap-1 md:gap-2">
      <p-tag
        [value]="getStatusLabel(task().status)"
        [severity]="getStatusSeverity(task().status)"
        rounded
        class="text-xs md:text-sm"
      />
      <p-tag
        [value]="getPriorityLabel(task().priority)"
        [severity]="getPrioritySeverity(task().priority)"
        rounded
        class="text-xs md:text-sm"
      />
    </div>

    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center text-xs md:text-sm text-color-secondary gap-1">
      <div class="flex items-center gap-2">
        <p-avatar
          shape="circle"
          [label]="getInitials(task().createdByName || '')"
          styleClass="bg-surface-200 text-color font-medium"
          class="w-6 h-6 md:w-8 md:h-8 text-xs md:text-sm"
          pTooltip="Utworzony przez"
        />
        <span>{{ task().createdByName }}</span>
      </div>

      <span class="whitespace-nowrap">
        {{ task().createdAt | date: 'dd.MM.yyyy' }}
      </span>
    </div>

    @if (isAssignee() || isCreator()) {
      <div class="pt-2 md:pt-3 border-t border-surface-200 flex flex-wrap gap-1">
        @for (status of availableStatuses(); track status) {
          <p-button
            size="small"
            text
            rounded
            [label]="getStatusLabel(status)"
            [disabled]="task().status === status"
            (click)="onStatusChange(status)"
            class="text-xs md:text-sm"
          />
        }
      </div>
    }
  </div>
</p-card>