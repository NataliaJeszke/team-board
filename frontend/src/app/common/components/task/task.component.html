<p-card class="h-full flex flex-col">
    <ng-template pTemplate="header">
      <div class="flex justify-between items-start gap-2">
        <div class="font-semibold text-lg leading-tight">
          {{ task().title }}
        </div>

        @if (isCreator) {
          <div class="flex gap-1">
            <p-button
              icon="pi pi-pencil"
              class="p-button-text p-button-sm"
              pTooltip="Edytuj"
              (click)="onEdit()"
            ></p-button>
  
            <p-button
              icon="pi pi-trash"
              class="p-button-text p-button-sm p-button-danger"
              pTooltip="UsuÅ„"
              (click)="onDelete()"
            ></p-button>
          </div>
        }
      </div>
    </ng-template>
  
    <div class="flex-1 flex flex-col gap-3">
      <div class="flex flex-wrap gap-2">
        <p-tag
          [value]="getStatusLabel(task().status)"
          [severity]="getStatusSeverity(task().status)"
        ></p-tag>
  
        <p-tag
          [value]="getPriorityLabel(task().priority)"
          [severity]="getPrioritySeverity(task().priority)"
        ></p-tag>
      </div>
  
      <div class="flex items-center gap-4 text-sm text-color-secondary">
        <div class="flex items-center gap-2">
          <p-avatar
            shape="circle"
            [label]="getInitials(task().assignedToName || 'U')"
            pTooltip="Przypisany"
          ></p-avatar>
          <span>{{ task().assignedToName || 'Nieprzypisany' }}</span>
        </div>

        <div class="flex items-center gap-2">
          <p-avatar
            shape="circle"
            styleClass="bg-primary text-white"
            [label]="getInitials(task().createdByName || 'U')"
            pTooltip="Utworzony przez"
          ></p-avatar>
          <span>{{ task().createdByName }}</span>
        </div>
      </div>
    </div>
  
    <ng-template pTemplate="footer">
      <div class="flex justify-between items-center">
        <small class="text-color-secondary">
          {{ task().createdAt | date: 'dd.MM.yyyy' }}
        </small>
  
        @if (isAssignee || isCreator) {
          <div class="flex gap-1">
            @for (status of availableStatuses; track status) {
                <p-button
                  class="p-button-text p-button-sm"
                  [label]="getStatusLabel(status)"
                  [disabled]="task().status === status"
                  (click)="onStatusChange(status)"
                ></p-button>
              }
          </div>
        }
      </div>
    </ng-template>
  </p-card>