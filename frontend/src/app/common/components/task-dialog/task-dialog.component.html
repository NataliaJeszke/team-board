<form [formGroup]="taskForm" (ngSubmit)="onSave()" class="task-dialog-form">
  <div class="form-container">
    <div class="field">
      <label for="title" class="field-label">
        {{ 'common.components.task-dialog.labels.title' | translate }}
        <span class="required">*</span>
      </label>
      <input
        id="title"
        type="text"
        pInputText
        formControlName="title"
        [placeholder]="'common.components.task-dialog.placeholders.title' | translate"
        class="w-full"
        [class.ng-invalid]="isFieldInvalid('title')"
        [class.ng-dirty]="isFieldInvalid('title')"
      />
      @if (isFieldInvalid('title')) {
        <small class="error-message">{{ getFieldError('title') }}</small>
      }
    </div>

    <div class="field field-column">
      <label for="assignedTo" class="field-label">
        {{ 'common.components.task-dialog.labels.assignedTo' | translate }}
      </label>
      <p-select
        id="assignedTo"
        formControlName="assignedToId"
        [options]="availableUsers"
        optionLabel="name"
        optionValue="id"
        [placeholder]="'common.components.task-dialog.placeholders.assignedTo' | translate"
        [showClear]="true"
        class="w-full"
        [class.ng-invalid]="isFieldInvalid('assignedToId')"
        [class.ng-dirty]="isFieldInvalid('assignedToId')"
      />
      @if (isFieldInvalid('assignedToId')) {
        <small class="error-message">{{ getFieldError('assignedToId') }}</small>
      }
    </div>

    <div class="field">
      <label for="priority" class="field-label">
        {{ 'common.components.task-dialog.labels.priority' | translate }}
        <span class="required">*</span>
      </label>
      <p-select
        id="priority"
        formControlName="priority"
        [options]="priorityOptions()"
        optionLabel="label"
        optionValue="value"
        [placeholder]="'common.components.task-dialog.placeholders.priority' | translate"
        class="w-full"
      />
    </div>

    <div class="field">
      <label for="status" class="field-label">
        {{ 'common.components.task-dialog.labels.status' | translate }}
        <span class="required">*</span>
      </label>
      <p-select
        id="status"
        formControlName="status"
        [options]="statusOptions()"
        optionLabel="label"
        optionValue="value"
        [placeholder]="'common.components.task-dialog.placeholders.status' | translate"
        class="w-full"
      />
    </div>
  </div>

  <div class="dialog-footer mt-4">
    <p-button
      [label]="'common.components.task-dialog.actions.cancel' | translate"
      severity="secondary"
      [text]="true"
      (onClick)="onCancel()"
    ></p-button>
    <p-button
      [label]="'common.components.task-dialog.actions.save' | translate"
      severity="primary"
      [disabled]="taskForm.invalid"
      (onClick)="onSave()"
    ></p-button>
  </div>
</form>
